<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-LHHNXBN6B2"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-LHHNXBN6B2");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAgZJREFUWEftl19LFFEYxn/vjLsoCQlF2K6uYNYXKG/6CHklFURZ4G3QVdS1BkkU0mXZjUWin0AM6qqgP1cFStEfwTaFjdYcTQd3ndkTZwqL9rgzi0Nrsedy5pzzPuc97/Oc9xGAzOmBTmXLNaBXoEF/2+4oKcWetjSd3d2IyJ/bfRNkyG1suintpwZSkpQ7KHq2G/T39SEAUCIrgn9JMn2D1xEuAtbfBPAjlryRzNnBOaAjzuB6r7AM/IznaQAeYNcIABqAMgVPNNicP3aUrvReSiXjFCNmyxJef8wxMvWM3anUVkW4udYIoAQ0JxPcv3yGI4cyVSfn8fQs/cMTNO9v5YCZBf8ggKVVl9EHL3DWXIQyXv86kQjzeYdHr97Tko7xCvSmx6+Mkv3iINbWAAJyCVgilYSo+itYyDucvHqXbH4Zu1zZyuokIg3NLDAVYR3ADsnAPT7lnaDAwkbsNeCuF3kyM4tb2DCTUKBQ9Lg1+ZQPucVgToXnuHoWhJ1Y/19bL3LuxhjP32bjp2HNAURRwg3f5+HLd+Sc1QBvrFcQVQlty0ILZexFuENoWJfiegb+0wwY2/KmZILbF05w+GA7SsHC4jL9w+PMf12JvSExGhP94nXsa2FXYxIUFDyfuc9LaLWLMiIKkVfRmvlKBacP+jztXkJ6wWq84aY1q7k51Uhqac+/AzXsusZMK+AIAAAAAElFTkSuQmCC"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAgZJREFUWEftl19LFFEYxn/vjLsoCQlF2K6uYNYXKG/6CHklFURZ4G3QVdS1BkkU0mXZjUWin0AM6qqgP1cFStEfwTaFjdYcTQd3ndkTZwqL9rgzi0Nrsedy5pzzPuc97/Oc9xGAzOmBTmXLNaBXoEF/2+4oKcWetjSd3d2IyJ/bfRNkyG1suintpwZSkpQ7KHq2G/T39SEAUCIrgn9JMn2D1xEuAtbfBPAjlryRzNnBOaAjzuB6r7AM/IznaQAeYNcIABqAMgVPNNicP3aUrvReSiXjFCNmyxJef8wxMvWM3anUVkW4udYIoAQ0JxPcv3yGI4cyVSfn8fQs/cMTNO9v5YCZBf8ggKVVl9EHL3DWXIQyXv86kQjzeYdHr97Tko7xCvSmx6+Mkv3iINbWAAJyCVgilYSo+itYyDucvHqXbH4Zu1zZyuokIg3NLDAVYR3ADsnAPT7lnaDAwkbsNeCuF3kyM4tb2DCTUKBQ9Lg1+ZQPucVgToXnuHoWhJ1Y/19bL3LuxhjP32bjp2HNAURRwg3f5+HLd+Sc1QBvrFcQVQlty0ILZexFuENoWJfiegb+0wwY2/KmZILbF05w+GA7SsHC4jL9w+PMf12JvSExGhP94nXsa2FXYxIUFDyfuc9LaLWLMiIKkVfRmvlKBacP+jztXkJ6wWq84aY1q7k51Uhqac+/AzXsusZMK+AIAAAAAElFTkSuQmCC"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="https://www.fincash.com/assets/icon/apple-touch-icon.png"
    />
    <link
      rel="mask-icon"
      href="https://www.fincash.com/assets/icon/safari-pinned-tab.svg"
      color="#5bbad5"
    />
    <link
      rel="shortcut icon"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAgZJREFUWEftl19LFFEYxn/vjLsoCQlF2K6uYNYXKG/6CHklFURZ4G3QVdS1BkkU0mXZjUWin0AM6qqgP1cFStEfwTaFjdYcTQd3ndkTZwqL9rgzi0Nrsedy5pzzPuc97/Oc9xGAzOmBTmXLNaBXoEF/2+4oKcWetjSd3d2IyJ/bfRNkyG1suintpwZSkpQ7KHq2G/T39SEAUCIrgn9JMn2D1xEuAtbfBPAjlryRzNnBOaAjzuB6r7AM/IznaQAeYNcIABqAMgVPNNicP3aUrvReSiXjFCNmyxJef8wxMvWM3anUVkW4udYIoAQ0JxPcv3yGI4cyVSfn8fQs/cMTNO9v5YCZBf8ggKVVl9EHL3DWXIQyXv86kQjzeYdHr97Tko7xCvSmx6+Mkv3iINbWAAJyCVgilYSo+itYyDucvHqXbH4Zu1zZyuokIg3NLDAVYR3ADsnAPT7lnaDAwkbsNeCuF3kyM4tb2DCTUKBQ9Lg1+ZQPucVgToXnuHoWhJ1Y/19bL3LuxhjP32bjp2HNAURRwg3f5+HLd+Sc1QBvrFcQVQlty0ILZexFuENoWJfiegb+0wwY2/KmZILbF05w+GA7SsHC4jL9w+PMf12JvSExGhP94nXsa2FXYxIUFDyfuc9LaLWLMiIKkVfRmvlKBacP+jztXkJ6wWq84aY1q7k51Uhqac+/AzXsusZMK+AIAAAAAElFTkSuQmCC"
      type="image/png"
    />
    <!-- awesome-font CDN link -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- bootstrap CSS link -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- bootstrap JS link -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <link rel="stylesheet" href="./form_style.css" />
    <link rel="stylesheet" href="./loan.css" />

    <title>Personal Loan</title>


    <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
        c[a] =
          c[a] ||
          function () {
            (c[a].q = c[a].q || []).push(arguments);
          };
        t = l.createElement(r);
        t.async = 1;
        t.src = "https://www.clarity.ms/tag/" + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, "clarity", "script", "ocqjluskxb");
    </script>
  </head>

  <body>
    <!-- navbar section start -->
    <header class="nav-container container-fluid p-3">
      <div class="nav">
        <img src="./images/logo.png" alt="logo" />
      </div>
    </header>

    <!-- navbar section end -->

    <!-- Hero Section Start  -->
    <section
      class="hero-section container-fluid"
      id="hero-section container-fluid"
    >
      <div class="hero-content-container">
        <div class="hero-nav-box hiddn">
          <div class="hero-nav d-flex align-items-center">
            <i
              onclick=""
              class="fa-solid fa-arrow-left btn-prev nav-btn hidden"
            ></i
            >&nbsp;&nbsp;&nbsp;
            <!-- <h4> Personal Loan</h4> -->
          </div>
        </div>
        <div id="P-loan-box" class="hero-heading text-center">
          <!-- <h3>Unlock Best Personal Loan Offers</h3>
          <p>Avail a Loan of Your Choice Instantly.</p> -->
        </div>
        <div id="Congress-box" class="Congress-boxs text-center hidden">
          <h1>Congratulations!!!</h1>
          <p>Please check below.</p>
        </div>
      </div>
    </section>

    <!-- Hero Section End  -->

    <!-- form section start -->

    <section class="container-fluid form-container-form-2 hidde">
      <div
        class="container-md form-heading-container py- px-5 d-flex justify-content-center align-items-center"
      >
        <div class="form-section" id="form-section">
          <!-- Progress Bar -->
          <div id="progress-section" class="progress-container hidden">
            <div class="progress-bar" id="progress-bar"></div>
            <!-- <div class="progress-text" id="progress-text">1/6</div> -->
            <div
              class="position-absolute progress-heading"
              id="progress-heading"
            >
              Basic Details
            </div>
          </div>

          <div
            class="d-flex form-box align-items-center justify-content-center"
          >
            <!-- loan section -->
            <form
              id="form1"
              class="form-step align-items-center justify-content-center"
            >
              <div class="loan-amount-section d-flex justify-content-center">
                <div class="loan-amount-container">
                  <div
                    class="loan-amount-info d-flex align-items-center justify-content-between"
                  >
                    <h6>Your Desired Loan Amount</h6>
                    <div class="loan-amount-box">
                      <div class="loan-amount-price d-flex">
                        <i
                          class="fa-solid fa-indian-rupee-sign"
                          style="color: #01d024"
                        ></i>
                        <div class="price-box">
                          <input
                            type="text"
                            class="loan-price"
                            id="rangeValue1"
                            value="10000"
                            oninput="loanSlider1(this.value)"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <input
                    class="range"
                    type="range"
                    name=""
                    id=""
                    min="1000"
                    max="1000000"
                    value="1000"
                    oninput="loanInput1(this.value)"
                  />

                  <div
                    class="rangebar-values d-flex align-items-center justify-content-between"
                  >
                    <p>
                      min <i class="fa-solid fa-indian-rupee-sign"></i> 1000
                    </p>
                    <p>
                      Max <i class="fa-solid fa-indian-rupee-sign"></i> 10 Lacs
                    </p>
                  </div>
                </div>
                <span class="error" id="loanAmountError"></span>
              </div>

              <div
                class="ms-2 salary-amount d-flex align-items-start justify-content-between"
              >
                <div class="basic-input-box">
                  <input
                    type="text"
                    name="monthlyincome"
                    id="monthly-income"
                    placeholder="20,000"
                    required
                  />
                  <i
                    class="fa-solid fa-indian-rupee-sign"
                    style="color: #01d024"
                  ></i>
                  <label class="basic-input-box-title" for="monthly-income"
                    >Monthly Income<sup>*</sup> :</label
                  ><br />
                  <span style="font-size: 11px; padding-left: 10px"
                    >Income entered must be verified by your bank</span
                  ><br />
                  <span class="error" id="monthlyincomeError"
                    >Please Enter your Income</span
                  ><br />
                </div>

                <div class="basic-input-box">
                  <select name="salarymode" id="salarymode">
                    <!-- <option value="">Select</option> -->
                    <option value="bank account">Bank Account</option>
                    <option value="cheque">Cheque</option>
                    <!-- <option value="cash">cash</option> -->
                  </select>
                  <label class="basic-input-box-title" for="salarymode"
                    >Salary Mode<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="salarymodeError"
                    >Please select Salary Mode</span
                  >
                </div>
              </div>

              <div class="basic-input-box btns-group text-center">
                <input
                  type="button"
                  id="submitotpbtn1"
                  value="Next"
                  class="mb-3 btn-next otpbtn"
                />
              </div>
            </form>

            <!-- personal address section -->
            <form
              id="form2"
              class="form-step align-items-center justify-content-center hidde"
            >
              <h6 style="padding: 10px 0; margin-left: 20px">
                Communication address:
              </h6>
              <div
                id=" form-container"
                class="personal-details align-items-center d-flex"
              >
                <div class="basic-input-box">
                  <input
                    type="text"
                    name="addressline-1"
                    id="addressline-1"
                    placeholder="Address Line 1"
                    required
                  />
                  <label class="basic-input-box-title" for="addressline-1"
                    >Address Line 1<sup>*</sup> </label
                  ><br />
                  <span class="error" id="addressline-1Error"
                    >Please Enter Address Line 1</span
                  >
                </div>
                <div class="basic-input-box">
                  <input
                    type="text"
                    name="addressline-2"
                    id="addressline-2"
                    placeholder="Address Line 2"
                    required
                  />
                  <label class="basic-input-box-title" for="addressline-2"
                    >Address Line 2<sup>*</sup> </label
                  ><br />
                  <span class="error" id="addressline-2Error"
                    >Please Enter Address Line 2</span
                  >
                </div>
                <div class="city-info-box position-relative">
                  <input
                    type="text"
                    name="pincode"
                    id="pincode"
                    placeholder="400607"
                    required
                    onclick=""
                  />
                  <label class="basic-input-box-title" for="pincode"
                    >Pincode<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="pincodeError"
                    >Please Enter Pincode</span
                  >
                </div>
                <div class="city-info-box position-relative" id="cityDiv">
                  <input
                    type="text"
                    name="city"
                    id="City"
                    placeholder="City"
                    required
                  />
                  <label class="basic-input-box-title" for="City"
                    >City<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="cityError">Please Enter City</span>
                </div>

                <div class="city-info-box position-relative" id="stateDiv">
                  <!-- <input
                    type="text"
                    name="state"
                    id="State"
                    placeholder="State"
                    required
                  /> -->
                  <select name="state" id="stateDropdown1" required>
                    <option value="">Select State</option>
                    <!-- Default placeholder option -->
                    <!-- Options will be dynamically added here -->
                  </select>
                  <label class="basic-input-box-title" for="State"
                    >State<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="stateError">Please Enter State</span>
                </div>
                <div class="city-info-box position-relative">
                  <select name="natureaddress" id="natureAddress">
                    <option value="">Select</option>
                    <option value="Self Owned">Self Owned</option>
                    <option value="Rented">Rented</option>
                    <!-- <option value="With Parents">With Parents</option>
                    <option value="With Relatives">With Relatives</option>
                    <option value="With Friends">With Friends</option>
                    <option value="Paying Guest">Paying Guest</option>
                    <option value="Leased">Leased</option>
                    <option value="Pagadi">Pagadi</option> -->
                  </select>
                  <label class="basic-input-box-title" for="natureAddress"
                    >Nature of Address<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="natureaddressError"
                    >Please Enter Nature of Address</span
                  >
                </div>
                <div class="city-info-box position-relative">
                  <input
                    type="number"
                    min="0"
                    max="15"
                    name="years-current-address"
                    id="years-current-address"
                    placeholder="12"
                    required
                  />
                  <label
                    class="basic-input-box-title"
                    for="years-current-address"
                    >Years at current Address<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="yearsaddresserror"
                    >Please Enter Years at current Address</span
                  >
                </div>
              </div>
              <div
                class="address-checkbox privacy-checkbox d-flex pb-2 justify-content-center align-items-center"
              >
                <input type="checkbox" name="checkbox" id="checkbox" checked />
                <p>Permanent address same as communication address</p>
              </div>

              <div class="basic-input-box btns-group text-center">
                <input
                  type="button"
                  id="submitotpbtn2"
                  value="Next"
                  class="mb-3 btn-next otpbtn"
                  onclick="validateForm2()"
                />
              </div>
            </form>

            <!-- office address section -->
            <form
              id="form3"
              class="form-step align-items-center justify-content-center"
            >
              <h6 style="padding: 10px 0; margin-left: 20px">
                Office Details:
              </h6>
              <div
                id=" form-container"
                class="personal-details align-items-center d-flex"
              >
                <div class="basic-input-box">
                  <input
                    type="text"
                    name="companyname"
                    id="companyname"
                    placeholder="Fincash"
                    required
                  />
                  <label class="basic-input-box-title" for="companyname"
                    >Company Name<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="companynameError"
                    >Please Enter Company Name</span
                  >
                </div>
                <div class="city-info-box position-relative">
                  <select name="company-type" id="company-type">
                    <option value="">Select Type</option>
                    <option value="Private Limited">Private Limited</option>
                    <option value="Proprietor">Proprietor</option>
                    <option value="Government/PSU">Government/PSU</option>
                    <option value="LLP">LLP</option>
                    <option value="Public">Public</option>
                    <option value="Partnership Company">
                      Partnership Company
                    </option>
                  </select>
                  <label class="basic-input-box-title" for="company-type"
                    >Company Type<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="companytypeError"
                    >Please Select Company Type</span
                  >
                </div>
                <div class="basic-input-box">
                  <input
                    type="text"
                    name="Designation"
                    id="Designation"
                    placeholder="Designation"
                    required
                  />
                  <label class="basic-input-box-title" for="Designation"
                    >Designation<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="DesignationError"
                    >Please Enter Designation</span
                  >
                </div>
                <div class="city-info-box position-relative">
                  <input
                    type="number"
                    name="workexp"
                    id="work-exp"
                    placeholder="1"
                    required
                  />
                  <label class="basic-input-box-title" for="work-exp"
                    >Work Experience<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="workexpError"
                    >Please Enter your Work Experience</span
                  >
                </div>

                <div class="city-info-box position-relative">
                  <input
                    type="text"
                    name="officepincode"
                    id="officepincode"
                    placeholder="400607"
                    required
                  />
                  <label class="basic-input-box-title" for="officepincode"
                    >Pincode<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="officepincodeError"
                    >Please Enter Pincode</span
                  >
                </div>
                <div class="city-info-box position-relative">
                  <input
                    type="text"
                    name="officecity"
                    id="officecity"
                    placeholder="City"
                    required
                  />
                  <label class="basic-input-box-title" for="officecity"
                    >City<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="officecityError"
                    >Please Enter City</span
                  >
                </div>
                <div class="city-info-box position-relative">
                  <!-- <input
                    type="text"
                    name="officestate"
                    id="officestate"
                    placeholder="State"
                    required
                  /> -->
                  <select name="state" id="stateDropdown2" required>
                    <option value="">Select State</option>
                    <!-- Default placeholder option -->
                    <!-- Options will be dynamically added here -->
                  </select>
                  <label class="basic-input-box-title" for="officestate"
                    >State<sup>*</sup> :</label
                  ><br />
                  <span class="error" id="officestateError"
                    >Please Enter State</span
                  >
                </div>
              </div>

              <div class="basic-input-box btns-group text-center">
                <input
                  type="button"
                  id="getOtpButton"
                  value="SUBMIT"
                  class="mb-3 btn-next otpbtn"
                  onclick="validateForm3() "
                />
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <section id="otp-section-container">
      <div class="otp-section">
        <div class="otp-container">
          <h2>OTP Verification</h2>
          <p>
            We have sent the 4-digit OTP to<br />
            <b id="phone-number">+91-95112XXX36</b>
            <a>
              <svg
                class="feather feather-edit"
                fill="none"
                height="20"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                viewBox="0 0 24 24"
                width="20"
                xmlns="http://www.w3.org/2000/svg"
                style="cursor: pointer; margin-left: 4px"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                ></path>
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                ></path>
              </svg>
            </a>
          </p>
          <form>
            <p class="invalid-otp" style="display: none; color: #2700c2">
              Invalid OTP!
            </p>
            <div class="form-otp-box">
              <input
                autocomplete="one-time-code"
                maxlength="1"
                type="tel"
                style="text-align: center; font-weight: bold"
                id="otp1"
                oninput="moveToNext(this, 'otp2')"
              />
              <input
                autocomplete="one-time-code"
                maxlength="1"
                type="tel"
                style="text-align: center; font-weight: bold"
                id="otp2"
                oninput="moveToNext(this, 'otp3')"
              />
              <input
                autocomplete="one-time-code"
                maxlength="1"
                type="tel"
                style="text-align: center; font-weight: bold"
                id="otp3"
                oninput="moveToNext(this, 'otp4')"
              />
              <input
                autocomplete="one-time-code"
                maxlength="1"
                type="tel"
                style="text-align: center; font-weight: bold"
                id="otp4"
                oninput="moveToNext(this, 'otp4')"
              />
            </div>
            <div class="resend-otp-box">
              <p class="resend-timer-box">
                Resend OTP in <span id="timer">00:30</span>
              </p>
              <a
                class="resend-otp"
                id="resendOtp"
                style="
                  display: none;
                  color: #007bff;
                  cursor: pointer;
                  pointer-events: auto;
                "
                >Resend OTP</a
              >
            </div>

            <button
              type="button"
              id="verifyOTP"
              class="primaryBtn btn btn-primary"
              style="background-color: #2a3485; opacity: 1"
            >
              Verify OTP
            </button>
          </form>
        </div>
      </div>
    </section>
    <div id="loadingIndicator" style="display: none">
      <div class="spinner" id="data"></div>
      Loading...
    </div>
    <div class="containers" id="waitforredirection">
      <div class="spinners"></div>
      <h1>Redirecting to our trusted vendor...</h1>
      <p>Please wait while we complete your request.</p>
      <!-- <div class="progress-bars">
        <div class="progresss"></div>
      </div> -->
    </div>
    <div id="loan_not_approval">
      <div class="spinner"></div>
      <p id="loadingMessage">Processing your loan approval, please wait...</p>
      <!-- <div id="progressContainer">
        <div id="progressBar"></div>
      </div> -->
    </div>
    <!-- <div class="container" id="loan-not-approval">
      <h1>Loan Not Approved</h1>
      <p class="message">
        Unfortunately, your loan request has not been approved at this time.
      </p>
      <p class="message">
        Please try again later or contact customer support for more information.
      </p>

      <div class="button-container">
        <button class="home-btn">View Loan Requirements</button>
      </div>
    </div> -->
    <!-- form section end -->
  </body>

  <!-- <script src="form_script.js"></script> -->

  <script>
    // Get the monthly income input element
    const rangeValue1 = document.getElementById("rangeValue1");
    let commState = "";
    let officeState = "";
    // Add event listener to restrict input to digits only
    rangeValue1.addEventListener("input", function () {
      // Replace any non-digit character
      this.value = this.value.replace(/\D/g, "");
    });
  </script>
  <script>
    let id = "";
    let loanData = {};
    // loan amount section start
    function loanInput1(value) {
      document.getElementById("rangeValue1").value = value;
    }

    function loanSlider1(value) {
      document.querySelector(".range").value = value;
    }

    document.getElementById("form2").style.display = "none";
    document.getElementById("form3").style.display = "none";

    function moveToNext(current, nextFieldId) {
      if (current.value.length >= current.maxLength) {
        document.getElementById(nextFieldId).focus();
        Array.from(document.querySelectorAll(".form-otp-box input")).every(
          (input) => input.value
        );
      }
    }
    const verifyOTPSubmitButton = document.getElementById("verifyOTP");
    document
      .querySelectorAll(".form-otp-box input")
      .forEach((input, index, inputs) => {
        input.addEventListener("keydown", (e) => {
          if (e.key === "Backspace" && !e.target.value && index > 0) {
            inputs[index - 1].focus();
          }
        });
      });

    verifyOTPSubmitButton.addEventListener("click", async () => {
      const otp = Array.from(document.querySelectorAll(".form-otp-box input"))
        .map((input) => input.value)
        .join("");
      if (otp.length === 4) await verifyOTP(otp);
      else {
        alert("please enter correct OTP!");
      }
    });
    async function verifyOTP(curretOTP) {
      // const otp = document.getElementById('otp').value;
      // const progressBar = document.getElementById("progressBar");
      const loadingMessage = document.getElementById("loadingMessage");
      // Example OTP for demonstration
      const loanDataString = localStorage.getItem("loan");
      if (!loanDataString) {
        throw new Error("Loan data not found in local storage.");
      }

      // Parse the stringified JSON object
      let data = JSON.parse(loanDataString);
      console.log(data);
      // Extract the mobile number from the object
      const currentMobile = data.mobile;

      if (!currentMobile) {
        throw new Error("Mobile number not found in loan data.");
      }
      // Simulate progress
      // let progress = 0;
      // const progressInterval = setInterval(() => {
      //   progress += 10;
      //   progressBar.style.width = progress + "%";
      //   if (progress >= 100) {
      //     clearInterval(progressInterval);
      //   }
      // }, 500); // Update progress every 0.5 second

      // Simulate waiting message update
      setTimeout(() => {
        loadingMessage.textContent = "This may take a few moments, hang tight!";
      }, 3000);

      const loadingIndicator = document.getElementById("loadingIndicator");
      try {
        const response = await fetch(
          `https://asia-south1-ads-ai-101.cloudfunctions.net/loan_api/loan_verifyotp`,
          // `http://localhost/loan_verifyotp`,

          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              mobile: currentMobile,
              otp: curretOTP,
              data,
            }),
          }
        );

        // Parse the JSON data from the response
        // Log the data or use it as needed
        if (!response.ok) {
          // Handle cases where the response is not successful (e.g., 404, 500)
          throw new Error(`API request failed with status: ${response.status}`);
          return;
        }

        const approval = await response.json();
        console.log("Approval: ", approval);
        // Check if the response has an error message like "Invalid OTP"
        if (approval.message && approval.message === "Invalid OTP") {
          console.error("Error: Invalid OTP");
          document.querySelector(".invalid-otp").style.display = "block";
          document.getElementById("error-message").textContent =
            "Invalid OTP. Please try again.";
          // Handle the error case (e.g., show an alert or display error on UI)
          // alert("Invalid OTP. Please try again.");
          return;
        }

        document.getElementById("otp-section-container").style.display = "none";

        document.querySelector(".invalid-otp").style.display = "none";
        // Assuming data is successfully processed
        function redirectUser() {
          // Check if the `offers` array has at least one entry
          if (
            approval?.approval?.redirection &&
            approval?.approval?.redirection?.should_redirect
          ) {
            loadingIndicator.style.display = "none";
            console.log(approval.approval);
            // Get the link from the first offer
            const firstOfferLink =
              approval?.approval?.redirection?.redirect_link;
            // Redirect the user to the link
            document.getElementById("waitforredirection").style.display =
              "flex";
            document.getElementById("loan_not_approval").style.display = "flex";

            // Check if the firstOfferLink is not null or undefined
            if (firstOfferLink) {
              setTimeout(() => {
                // Redirect the user to the link after a small delay
                window.location.href = firstOfferLink;
              }, 100); // Delay before redirect
            } else {
              alert("No Redirection link1");
              console.log("No valid offer link available, no redirection.");
            }
          } else {
            // localStorage.removeItem("loan");

            // document.getElementById("");
            // alert("No Redirection link2");

            // document.getElementById("loan-not-approval").style.display =
            //   "block";

          
            window.location = "lenders.html";
            console.error("No offers available to redirect.");
          }
        }
        redirectUser();

        // if (approval?.data.redirection?.redirect_link == null) {
        // const userPermission = confirm(
        //   "You are being redirected to another website. Do you want to proceed?"
        // );

        // If the user agrees, proceed with redirection
        // if (userPermission) {
        // window.location = "https://www.fincash.com/";
        // } else {
        //   // Optionally handle when the user cancels
        //   console.log("User chose not to be redirected.");
        // }
        // }
        // console.log("Approval: ", data?.approval); // Logging the data on successful fetch

        // Save the updated formData back to localStorage
        // localStorage.setItem("loan", JSON.stringify(loanData));
        document.getElementById("waitforredirection").style.display = "none";
        loadingIndicator.style.display = "none";
        // formData.secretId = data.secretId;
        document.getElementById("hero-section container-fluid").style.display =
          "none";
        document.getElementById("form-section").style.display = "none";

        // showForm(currentStep);
      } catch (error) {
        // Hide the loading indicator if there's an error
        document.getElementById("loadingIndicator").style.display = "none";
        console.error("Error in verifying OTP:", error);
        document.querySelector(".invalid-otp").style.display = "block";
        // Handle the error as needed
      }
    }
    function startTimer(duration, display) {
      let timer = duration,
        minutes,
        seconds;
      const interval = setInterval(() => {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        display.textContent = "00:" + seconds;

        if (--timer < 0) {
          clearInterval(interval);
          document.querySelector(".resend-timer-box").style.display = "none";
          document.querySelector(".resend-otp").style.display = "block";
          document.getElementById("verifyOTP").style.display = "block";
        }
      }, 1000);
    }

    //get otp
    const submitotpbtn1 = document.getElementById("submitotpbtn1");
    submitotpbtn1.addEventListener("click", async () => {
      await validateForm1();
    });

    const resendOtpButton = document.getElementById("resendOtp");
    resendOtpButton.addEventListener("click", () => {
      resendotp();
    });

    async function resendotp() {
      await validateForm1();
      const thirtySeconds = 30,
        display = document.querySelector("#timer");
      startTimer(thirtySeconds, display);
      document.querySelector(".resend-timer-box").style.display = "block";
      document.querySelector(".resend-otp").style.display = "none";
    }

    async function validateForm1() {
      const loanAmount = document.getElementById("rangeValue1").value;
      const loanAmountError = document.getElementById("loanAmountError");
      const monthlyIncome = document.getElementById("monthly-income").value;
      const monthlyincomeError = document.getElementById("monthlyincomeError");
      const salaryMode = document.getElementById("salarymode").value;
      const salarymodeError = document.getElementById("salarymodeError");
      if (loanAmount === "") {
        loanAmountError.style.display = "block";
        return false;
      } else {
        loanAmountError.style.display = "none";
      }

      if (monthlyIncome === "") {
        monthlyincomeError.style.display = "block";
        return false;
      } else {
        monthlyincomeError.style.display = "none";
      }

      if (salaryMode === "") {
        salarymodeError.style.display = "block";
        return false;
      } else {
        salarymodeError.style.display = "none";
      }

      if (loanAmount !== "" && monthlyIncome !== "" && salaryMode !== "") {
        document.getElementById("form1").style.display = "none";
        document.getElementById("form2").style.display = "block";
        const getPin = JSON.parse(localStorage.getItem("loan")).pincode;
        const pincode = document.getElementById("pincode");
        const State = document.getElementById("State");
        // https://api.postalpincode.in/pincode/276302
        // console.log(currentMobile, loanAmount);
        // const response = await fetch(
        //   ` https://api.postalpincode.in/pincode/${getPin}`,
        //   {
        //     method: "POST",
        //     headers: { "Content-Type": "application/json" },
        //     mode: 'no-cors'
        //   }
        // );
        // if (response.ok) {
        //   console.log("OTP Response : ", response);
        // }
        // const responseData = await response();
        // console.log("OTP Data: ",responseData);
        pincode.value = getPin;
        console.log("Pin: ", getPin);
        console.log("API Calling..............1FORM");

        // button.disabled = true;
        loanData.desired_loan_amount = loanAmount;
        loanData.net_monthly_income = monthlyIncome;
        loanData.salary_type = salaryMode;

        // try {
        //   // Fetch and parse the object from local storage
        //   const loanDataString = localStorage.getItem("loan");
        //   let newData = JSON.parse(loanDataString) || {};
        //   console.log("Loan Amount: ", loanAmount);
        //   newData = { loanAmount: loanAmount, ...newData };

        //   // Save the updated formData back to localStorage
        //   localStorage.setItem("loan", JSON.stringify(newData));
        //   if (!loanDataString) {
        //     throw new Error("Loan data not found in local storage.");
        //   }

        //   // Parse the stringified JSON object
        //   const loanData = JSON.parse(loanDataString);
        //   // console.log(loanData);
        //   // Extract the mobile number from the object
        //   const currentMobile = loanData.mobile;

        //   if (!currentMobile) {
        //     throw new Error("Mobile number not found in loan data.");
        //   }
        //   console.log(currentMobile, loanAmount);
        //   const response = await fetch(
        //     `https://asia-south1-ads-ai-101.cloudfunctions.net/loan_api/loan_getotp`,
        //     // `http://localhost/loan_getotp`, // Endpoint with source_id as parameter
        //     {
        //       method: "POST",
        //       headers: { "Content-Type": "application/json" },
        //       body: JSON.stringify({
        //         mobile: currentMobile, // Using mobile number from local storage
        //       }),
        //     }
        //   );
        //   console.log("Response: ", response);
        //   if (response.ok) {
        //     document.getElementById("form-section").style.display = "none";
        //     document.getElementById(
        //       "hero-section container-fluid"
        //     ).style.display = "none";
        //     document.getElementById("otp-section-container").style.display =
        //       "block";
        //     // console.log(response);
        //     document.getElementById(
        //       "phone-number"
        //     ).textContent = `+91-${currentMobile}`;
        //     const data = await response.json();
        //     console.log("Get OTP: ", data);
        //     document.getElementById("form1").style.display = "none";
        //     const thirtySeconds = 30,
        //       display = document.querySelector("#timer");
        //     startTimer(thirtySeconds, display);

        //     // await validateForm1();
        //     button.disabled = false;
        //     // Handle the successful response here
        //   } else {
        //     console.error("API request failed with status:", response.status);
        //     // Handle different status codes here
        //   }
        // } catch (error) {
        //   console.error("Error: ", error);
        //   console.error("An error occurred:", error.message);
        //   // Handle the error (e.g., show an error message to the user)
        // }
        console.log(loanData);
        await getState();
      }
    }
    // personal details section start

    const addressline1 = document.getElementById("addressline-1");
    const addressline1Error = document.getElementById("addressline-1Error");
    const addressline2 = document.getElementById("addressline-2");
    const addressline2Error = document.getElementById("addressline-2Error");
    const pincode = document.getElementById("pincode");
    const pincodeError = document.getElementById("pincodeError");
    const City = document.getElementById("City");
    const cityError = document.getElementById("cityError");
    const State = document.getElementById("State");
    const stateError = document.getElementById("stateError");
    const natureAddress = document.getElementById("natureAddress");
    const natureaddressError = document.getElementById("natureaddressError");
    const yearscurrentAddress = document.getElementById(
      "years-current-address"
    );
    const yearsaddresserror = document.getElementById("yearsaddresserror");

    // Get the select element
    const dropdown1 = document.getElementById("stateDropdown1");
    const dropdown2 = document.getElementById("stateDropdown2");
    console.log(dropdown1);
    console.log(dropdown2);
    // Event listener to capture and print the selected value
    dropdown1.addEventListener("change", function () {
      const selectedValue = dropdown1.value; // Get selected value (state id)
      const selectedText = dropdown1.options[dropdown1.selectedIndex].text; // Get selected display name
      commState = selectedValue;
      loanData.comm_state = selectedValue;

      console.log("Selected State ID:", selectedValue); // Print the selected ID
      console.log("Selected State Name:", selectedText); // Print the selected state name
      // loanData
    });
    dropdown2.addEventListener("change", function () {
      const selectedValue = dropdown2.value; // Get selected value (state id)
      const selectedText = dropdown2.options[dropdown2.selectedIndex].text; // Get selected display name
      officeState = selectedValue;
      loanData.office_state = selectedValue;

      console.log("Selected State ID:", selectedValue); // Print the selected ID
      console.log("Selected State Name:", selectedText); // Print the selected state name
      // loanData
    });
    // Function to populate the dropdown with states
    function populateDropdown1(states) {
      states.forEach((state) => {
        const option = document.createElement("option");
        option.value = state.id; // Set value to state id
        option.textContent = state.display_name; // Set displayed text
        dropdown1.appendChild(option);
      });
    }
    function populateDropdown2(states) {
      states.forEach((state) => {
        const option = document.createElement("option");
        option.value = state.id; // Set value to state id
        option.textContent = state.display_name; // Set displayed text
        dropdown2.appendChild(option);
      });
    }
    const getState = async () => {
      const response = await fetch(
        `https://asia-south1-ads-ai-101.cloudfunctions.net/loan_api/state`,
        // `http://localhost/state`,
        {
          method: "GET",
          headers: { "Content-Type": "application/json" },
        }
      );
      console.log("Response: ", response);

      if (response.ok) {
        const data = await response.json();
        populateDropdown1(data);
        populateDropdown2(data);
      }
    };
    // Populate dropdown with the state data

    function validateForm2() {
      if (addressline1.value === "") {
        addressline1Error.style.display = "block";
        return false;
      } else {
        addressline1Error.style.display = "none";
      }

      if (addressline2.value === "") {
        addressline2Error.style.display = "block";
        return false;
      } else {
        addressline2Error.style.display = "none";
      }

      if (pincode.value === "") {
        pincodeError.style.display = "block";
        return false;
      } else {
        pincodeError.style.display = "none";
      }

      if (City.value === "") {
        cityError.style.display = "block";
        return false;
      } else {
        cityError.style.display = "none";
      }

      if (commState === "") {
        stateError.style.display = "block";
        return false;
      } else {
        stateError.style.display = "none";
      }

      if (natureAddress.value === "") {
        natureaddressError.style.display = "block";
        return false;
      } else {
        natureaddressError.style.display = "none";
      }

      if (yearscurrentAddress.value === "") {
        yearsaddresserror.style.display = "block";
        return false;
      } else {
        yearsaddresserror.style.display = "none";
      }
      loanData.comm_address_line1 = addressline1.value;
      loanData.comm_address_line2 = addressline2.value;
      loanData.comm_pincode = pincode.value;
      loanData.comm_city = City.value;
      loanData.comm_address_type = natureAddress.value;
      loanData.comm_year_at_current_address = yearscurrentAddress.value;
      console.log("Loand Data: ", loanData);
      if (
        addressline1 &&
        addressline2 &&
        pincode &&
        City &&
        natureAddress &&
        yearscurrentAddress&&commState
      ) {
        document.getElementById("form2").style.display = "none";
        document.getElementById("form3").style.display = "block";
        // showForm(++currentStep);
        console.log("API Calling..............2FORM");
        // currentStep++;
        // showForm(currentStep);
      }
    }

    // office details section start
    const companyname = document.getElementById("companyname");
    const companynameError = document.getElementById("companynameError");
    const companyType = document.getElementById("company-type");
    const companytypeError = document.getElementById("companytypeError");
    const Designation = document.getElementById("Designation");
    const DesignationError = document.getElementById("DesignationError");
    const workExp = document.getElementById("work-exp");
    const workexpError = document.getElementById("workexpError");
    const officepincode = document.getElementById("officepincode");
    const officepincodeError = document.getElementById("officepincodeError");
    const officecity = document.getElementById("officecity");
    const officecityError = document.getElementById("officecityError");
    // const officestate = document.getElementById("officestate");
    const officestateError = document.getElementById("officestateError");

    async function validateForm3() {
      if (companyname.value === "") {
        companynameError.style.display = "block";
        return false;
      } else {
        companynameError.style.display = "none";
      }

      if (companyType.value === "") {
        companytypeError.style.display = "block";
        return false;
      } else {
        companytypeError.style.display = "none";
      }

      if (Designation.value === "") {
        DesignationError.style.display = "block";
        return false;
      } else {
        DesignationError.style.display = "none";
      }

      if (workExp.value === "") {
        workexpError.style.display = "block";
        return false;
      } else {
        workexpError.style.display = "none";
      }

      if (officepincode.value === "") {
        officepincodeError.style.display = "block";
        return false;
      } else {
        officepincodeError.style.display = "none";
      }

      if (officecity.value === "") {
        officecityError.style.display = "block";
        return false;
      } else {
        officecityError.style.display = "none";
      }

      if (officeState === "") {
        officestateError.style.display = "block";
        return false;
      } else {
        officestateError.style.display = "none";
      }

      loanData.company_name = companyname.value;
      loanData.company_type = companyType.value;
      loanData.designation = Designation.value;
      loanData.work_experience = workExp.value;
      loanData.office_city = officecity.value;
      loanData.office_pincode = officepincode.value;
      // loanData.office_state = officestate.value;
      console.log("Office Details: ", loanData);

      if (
        companyname &&
        companyType &&
        Designation &&
        workExp &&
        officepincode &&
        officecity &&
        officeState
      ) {
        // document.getElementById("form3").style.display = "none";
        console.log("API Calling..............3FORM");
      }
      const button = document.getElementById("getOtpButton");
      button.disabled = true;
      try {
        // Fetch and parse the object from local storage
        const loanDataString = localStorage.getItem("loan");
        let newData = JSON.parse(loanDataString) || {};
        // console.log("Loan Amount: ", loanAmount);
        newData = { ...loanData, ...newData };

        // Save the updated formData back to localStorage
        localStorage.setItem("loan", JSON.stringify(newData));
        if (!loanDataString) {
          throw new Error("Loan data not found in local storage.");
        }

        // Parse the stringified JSON object
        // const loanData = JSON.parse(loanDataString);
        // console.log(loanData);
        // Extract the mobile number from the object
        const currentMobile = newData.mobile;

        if (!currentMobile) {
          throw new Error("Mobile number not found in loan data.");
        }
        console.log(currentMobile);
        const response = await fetch(
          `https://asia-south1-ads-ai-101.cloudfunctions.net/loan_api/loan_getotp`,
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              mobile: currentMobile, // Using mobile number from local storage
            }),
          }
        );
        console.log("Response: ", response);
        if (response.ok) {
          document.getElementById("form-section").style.display = "none";
          document.getElementById(
            "hero-section container-fluid"
          ).style.display = "none";
          document.getElementById("otp-section-container").style.display =
            "block";
          // console.log(response);
          document.getElementById(
            "phone-number"
          ).textContent = `+91-${currentMobile}`;
          const data = await response.json();
          console.log("Get OTP: ", data);
          document.getElementById("form1").style.display = "none";
          const thirtySeconds = 30,
            display = document.querySelector("#timer");
          startTimer(thirtySeconds, display);

          // await validateForm1();
          button.disabled = false;
          // Handle the successful response here
        } else {
          console.error("API request failed with status:", response.status);
          // Handle different status codes here
        }
      } catch (error) {
        console.error("Error: ", error);
        console.error("An error occurred:", error.message);
        // Handle the error (e.g., show an error message to the user)
      }
    }
  </script>
</html>
